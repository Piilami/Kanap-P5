const retreiveLocalStorage = () => {
    // On lit le Local Storage et on retourne un tableau Javascript correspondant au panier
    const str = localStorage.getItem("cart");
    let cart = [];
    if (str) {
        cart = JSON.parse(str);
    }
    return cart;
}

function addCart(productColor, productQuantity){
    const product = {
        name: productName,
        id,
        color: productColor,
        quantity: Number(productQuantity),
        price: productPrice
    }

    //1 - Lire les informations du Local Storage
    let cart = retreiveLocalStorage();

    //2 - On va chercher le produit à ajouter dans le panier
    let cartProduct = cart.find((p) => p.id === product.id && p.color === product.color);

    //3 - Si on trouve le produit, on modifie ses quantités. Sinon, on l'ajoute au panier
    if (cartProduct) {
        cartProduct.quantity += product.quantity;
    } else {
        cart.push(product);
    }

    //4 - On enregistre les modifications dans le local Storage
    localStorage.setItem("cart", JSON.stringify(cart));
}









function showProductCard(cart) {
    cart.foreach((product) => {
        const productArticle = document.createElement("article")
        document.querySelector("#cart__items").appendChild(productArticle)
        productArticle.classList.add("cart__item")
        productArticle.dataset.id = product.id
        productArticle.dataset.color = product.color
        
        const divImage = document.createElement("div")
        document.querySelector(".cart__item").appendChild(divImage)
        divImage.classList.add("cart__item__img")

        const productImage = document.createElement("img")
        document.querySelector(.cart__item__img).appendChild(productImage)
        productImage.src = product.image
        productImage.alt = "pouet"
        div.appendChild()

    }
)
}



function totalPrice(cart) {

    let totalsItems = cart.map((x) => {
        return (x.quantity)
    });
    console.log(totalsItems)
}





/*let totals = cart.reduce((total, product) => {
  //Faire les calculs
}, {
  quantity: 0,
  price: 0
})*/
















function totalPrice(cart) {
  let totalPrice = [];
  cart.forEach((product) => {
    totalPrice.push(product.price);
    console.log(totalPrice);
  });











  /* //On récupère dans le cart les quantités de chaques articles grâce a la methode map
  let totalsItems = cart.map((x) => {
    return x.quantity;
  });
  //On additionne les quantités grâce à la fonction reduce
  const reducer = (acc, curr) => acc + curr;
  totalsItems = totalsItems.reduce(reducer);
  //finalement on l'affiche sur la page
  document.querySelector("#totalQuantity").textContent = totalsItems;
};*/




/*
de base 
//déclaration variable pour le prix total et la quantité totale
  let totalPricePerItem = 0;
  let totalQuantity = 0;
  // boucle pour parcourir le tableau "cart"
  cart.forEach((product) => {
    //création d'un tableau quantité
    let arrayOfQuantity = [];
    // push de la quantité d'items dans le tableau
    arrayOfQuantity.push(product.quantity);
    //utilisation reduce pour additionner les valeurs du tableau
    const reducer = (accumulator, currentValue) => accumulator + currentValue;
    const totalQuantityPerItem = arrayOfQuantity.reduce(reducer);
    //multiplication du prix unitaire a la quantité d'objet dans le cart puis addition de tous les prix pour le prix total et toute les quantités pour le total
    let price = totalQuantityPerItem * product.price;
    totalPricePerItem += price;
    totalQuantity += totalQuantityPerItem;
    document.querySelector("#totalQuantity").textContent = totalQuantity;
    document.querySelector("#totalPrice").textContent = totalPricePerItem;
  });
}*/